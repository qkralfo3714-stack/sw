<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŠ ê±°ì œë¥¼ ì§€ì¼œë¼!</title>
    <style>
        /* ìš”ì²­í•˜ì‹  ë‘¥ê·¼ëª¨ê¼´ í°íŠ¸ ì ìš© */
        @font-face {
            font-family: 'RoundedFixedsys';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/DungGeunMo.woff') format('woff');
            font-weight: normal;
            font-display: swap;
        }

        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'RoundedFixedsys', sans-serif;
            background-color: #f0f8ff; /* ì—°í•œ í•˜ëŠ˜ìƒ‰ ë°°ê²½ */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            color: #333;
            text-align: center;
        }

        /* ê²Œì„ ì»¨í…Œì´ë„ˆ */
        .container {
            width: 100%;
            max-width: 600px;
            /* [ìˆ˜ì •] DALL-E 3ë¡œ ìƒì„±ëœ ê·¸ë¦¼ ë°°ê²½ ì´ë¯¸ì§€ URLë¡œ ë³€ê²½ */
            background-image: url('https://user-images.githubusercontent.com/12964923/276709848-31682703-a189-4b2a-8c44-325f163836a0.png'); /* ì‹œì‘ í™”ë©´: ê±°ì œ ì„¬ ì „ê²½ */
            background-size: cover;
            background-position: center;
            padding: 2rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 5px solid #b3e5fc;
            transition: background-image 0.5s ease-in-out; /* ë°°ê²½ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ */
        }

        /* ê° ìŠ¤í…Œì´ì§€ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .stage {
            display: none; /* JSë¡œ ì œì–´í•˜ê¸° ìœ„í•´ ê¸°ë³¸ ìˆ¨ê¹€ */
            animation: fadeIn 0.5s ease-in-out;
            background-color: rgba(255, 255, 255, 0.92); /* ë°˜íˆ¬ëª… í°ìƒ‰ ë°°ê²½ ìœ ì§€ */
            border-radius: 15px;
            padding: 1.5rem;
        }

        /* ì‹œì‘ í™”ë©´ì€ ì²˜ìŒë¶€í„° ë³´ì´ë„ë¡ ì„¤ì • */
        #start-screen {
            display: block;
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        h1 {
            color: #0277bd;
            font-size: 2.5rem;
            margin-top: 0;
        }
        h2 {
            color: #00695c;
            font-size: 2rem;
            border-bottom: 3px dashed #4db6ac;
            padding-bottom: 10px;
        }

        p {
            font-size: 1.1rem;
            line-height: 1.6;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        button {
            font-family: 'RoundedFixedsys', sans-serif;
            background-color: #4CAF50; /* ì´ˆë¡ìƒ‰ */
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 5px;
            box-shadow: 0 4px #388e3c;
        }

        button:hover {
            background-color: #45a049;
            transform: translateY(2px);
            box-shadow: 0 2px #388e3c;
        }
        
        button:active {
            transform: translateY(4px);
            box-shadow: none;
        }

        /* ì…ë ¥ì°½ ìŠ¤íƒ€ì¼ */
        input[type="text"] {
            font-family: 'RoundedFixedsys', sans-serif;
            font-size: 1.1rem;
            padding: 10px;
            border: 3px solid #ccc;
            border-radius: 8px;
            margin: 0 5px;
            text-align: center;
        }

        /* ë©”ì‹œì§€ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        #message-box {
            font-size: 1.1rem;
            min-height: 1.5em; /* ë©”ì‹œì§€ê°€ ì—†ì„ ë•Œë„ ê³µê°„ ì°¨ì§€ */
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
        }

        .message-success {
            color: #155724;
            background-color: #d4edda;
            border: 2px solid #c3e6cb;
        }

        .message-error {
            color: #721c24;
            background-color: #f8d7da;
            border: 2px solid #f5c6cb;
            animation: shake 0.3s;
        }

        /* --- ìŠ¤í…Œì´ì§€ 1: ë¶„ë¦¬ìˆ˜ê±° --- */
        #trash-items {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        .trash {
            font-size: 3.5rem; /* ì´ëª¨ì§€ë¡œ ì•„ì´í…œ í‘œí˜„ */
            cursor: pointer;
            transition: transform 0.2s;
        }
        .trash:hover {
            transform: scale(1.2);
        }
        #recycling-bins {
            display: none; /* í´ë¦­ ì‹œ JSë¡œ í‘œì‹œ */
            margin-top: 15px;
            padding: 15px;
            background: #fafafa;
            border: 2px dashed #ddd;
            border-radius: 10px;
        }
        .bin-btn {
            background-color: #f57c00; /* ì£¼í™©ìƒ‰ */
            box-shadow: 0 4px #e65100;
        }
        .bin-btn:hover { background-color: #ef6c00; transform: translateY(2px); box-shadow: 0 2px #e65100; }
        .bin-btn:active { transform: translateY(4px); box-shadow: none; }

        /* [ìˆ˜ì •] íŒíŠ¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .hint-btn {
            background-color: #ffc107; /* ë…¸ë€ìƒ‰ */
            color: #333;
            font-size: 0.9rem;
            padding: 8px 15px;
            box-shadow: 0 4px #ffa000;
        }
        .hint-btn:hover { background-color: #ffb300; transform: translateY(2px); box-shadow: 0 2px #ffa000; }
        .hint-btn:active { transform: translateY(4px); box-shadow: none; }

        /* --- [ìˆ˜ì •] ìŠ¤í…Œì´ì§€ 2: ìˆ² í€´ì¦ˆ --- */
        #eco-quiz-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .eco-quiz-btn {
            background-color: #81c784; /* ìˆ² ìƒ‰ */
            box-shadow: 0 4px #558b2f;
            font-size: 1rem;
            width: 45%;
            min-height: 60px;
            padding: 10px;
        }
        .eco-quiz-btn:hover { background-color: #66bb6a; transform: translateY(2px); box-shadow: 0 2px #558b2f; }
        .eco-quiz-btn:active { transform: translateY(4px); box-shadow: none; }
        
        .eco-quiz-btn.found {
            background-color: #e57373; /* ì°¾ìœ¼ë©´ ë¹¨ê°„ìƒ‰ */
            color: #fff;
            box-shadow: 0 4px #c62828;
            cursor: not-allowed;
        }
        .eco-quiz-btn:disabled {
             opacity: 0.7;
        }


        /* --- ìŠ¤í…Œì´ì§€ 3: ë¹„ë°€ë²ˆí˜¸ --- */
        #password-hints {
            background: #fafafa;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
            text-align: left;
            width: fit-content;
            margin: 20px auto;
        }
        #password-hints p {
            margin: 8px 0;
            font-size: 1rem;
        }
        /* [ìˆ˜ì •] ìŠ¤í…Œì´ì§€ 3 íŒíŠ¸ ìˆ«ì ê°•ì¡° */
        #password-hints b {
            color: #d32f2f; /* ë¹¨ê°„ìƒ‰ */
            font-size: 1.5rem;
            padding: 0 5px;
        }
        #password-input {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        #password-input input {
            width: 40px;
            height: 40px;
            font-size: 2rem;
            padding: 5px;
        }
        
        /* ì—”ë”© í™”ë©´ */
        #end-screen h1 { color: #fbc02d; }
        #end-screen p:first-of-type {
            font-size: 5rem;
            margin: 10px 0;
        }
        #restart-btn {
            background-color: #1976d2; /* íŒŒë€ìƒ‰ */
            box-shadow: 0 4px #0d47a1;
        }
        #restart-btn:hover { background-color: #1565c0; transform: translateY(2px); box-shadow: 0 2px #0d47a1; }
        #restart-btn:active { transform: translateY(4px); box-shadow: none; }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- ê³µìš© ë©”ì‹œì§€ ë°•ìŠ¤ --><p id="message-box"></p>

        <!-- 0. ì‹œì‘ í™”ë©´ --><div id="start-screen" class="stage">
            <h1>ğŸŒŠ ê±°ì œë¥¼ ì§€ì¼œë¼! ğŸ¬</h1>
            <p>ë‹¹ì‹ ì€ 'ê±°ì œ ìƒíƒœí™˜ê²½ ì§€í‚´ì´' ì‹ ì… ëŒ€ì›ì…ë‹ˆë‹¤. ğŸ«¡</p>
            <p>ìœ„ê¸°ì— ë¹ ì§„ ì¹œêµ¬ë“¤ì„ êµ¬ì¶œí•  ì¤€ë¹„ê°€ ë˜ì—ˆë‚˜ìš”?</p>
            <button id="start-btn">ì„ë¬´ ì‹œì‘í•˜ê¸°! ğŸ”¥</button>
        </div>

        <!-- 1. ìŠ¤í…Œì´ì§€ 1: í•™ë™ ëª½ëŒí•´ë³€ --><div id="stage-1" class="stage">
            <h2>ğŸ–ï¸ 1ë‹¨ê³„: í•™ë™ ëª½ëŒí•´ë³€</h2>
            <p>ìœ¼ì•…! ëª½ëŒí•´ë³€ì´ ì“°ë ˆê¸°ë¡œ ë’¤ë®ì˜€ì–´ìš”! ğŸ˜±</p>
            
            <!-- í¼ì¦ 1: ë¶„ë¦¬ìˆ˜ê±° --><div id="trash-items">
                <!-- ì´ëª¨ì§€ë¥¼ ì“°ë ˆê¸° ì•„ì´í…œìœ¼ë¡œ ì‚¬ìš© --><span class="trash" data-type="plastic" data-name="í”Œë¼ìŠ¤í‹±ë³‘">ğŸ¾</span>
                <span class="trash" data-type="can" data-name="ìŒë£Œ ìº”">ğŸ¥«</span>
                <span class="trash" data-type="general" data-name="íœ´ì§€">ğŸ›ï¸</span>
            </div>
            
            <div id="recycling-bins">
                <p id="selected-trash-text"></p>
                <button class="bin-btn" data-bin="plastic">â™»ï¸ í”Œë¼ìŠ¤í‹±</button>
                <button class="bin-btn" data-bin="can">â™»ï¸ ìº”</button>
                <button class="bin-btn" data-bin="general">ğŸ—‘ï¸ ì¼ë°˜ ì“°ë ˆê¸°</button>
            </div>
            
            <!-- í¼ì¦ 2: ë‹¨ì–´ í€´ì¦ˆ (ì²˜ìŒì—” ìˆ¨ê¹€) --><div id="quiz-1" style="display: none;">
                <p>âœ¨ ê¹¨ë—í•´ì¡Œì–´ìš”! ...ì•—, ì €ê¸° ìª½ì§€ê°€? ğŸ“œ</p>
                <p>"ë°”ë‹¤ ì¹œêµ¬ë“¤ì´ ì•„íŒŒí•˜ê³  ìˆì–´...<br>ê°€ì¥ í° ë¬¸ì œëŠ” (00 00)ì´ì•¼."</p>
                <input type="text" id="quiz-1-answer" placeholder="ì •ë‹µ ì…ë ¥">
                <button id="quiz-1-submit">ì •ë‹µ í™•ì¸</button>
                <br>
                <!-- [ìˆ˜ì •] ìŠ¤í…Œì´ì§€ 1 íŒíŠ¸ ë²„íŠ¼ --><button id="quiz-1-hint-btn" class="hint-btn" style="margin-top: 10px;">ğŸ’¡ íŒíŠ¸ ë³´ê¸°</button>
                <p id="quiz-1-hint-text" style="display: none; font-size: 0.9rem; color: #555; margin-top: 10px;">
                    ì–´ë¶€ë“¤ì´ ìƒì–´ë²„ë ¸ì§€ë§Œ...<br>ë°”ë‹¤ì— ë‚¨ì•„ ìƒë¬¼ë“¤ì„ ìœ„í˜‘í•˜ëŠ” ê·¸ê²ƒ! '<b>ìœ </b>'ë ¹ '<b>ê·¸</b>'ë¬¼
                </p>
            </div>
        </div>

        <!-- [ìˆ˜ì •] 2. ìŠ¤í…Œì´ì§€ 2: êµ¬ì¡°ë¼ ìˆ² (í€´ì¦ˆë¡œ ë³€ê²½) --><div id="stage-2" class="stage">
            <!-- [ìˆ˜ì •] ìˆ² ì´ëª¨ì§€ ì¶”ê°€ --><h2>ğŸŒ³ğŸŒ² 2ë‹¨ê³„: êµ¬ì¡°ë¼ ìˆ² ğŸŒ²ğŸŒ³</h2>
            <p>ìˆ²ì´ ì´ìƒí•œ ì‹ë¬¼ë¡œ ë’¤ë®ì—¬ ìˆì–´ìš”. ğŸŒ¿<br>íŒ”ìƒ‰ì¡° 'ê±°ì œ' ğŸ¦ë¥¼ ì°¾ì•„ì£¼ì„¸ìš”!</p>
            
            <!-- í¼ì¦ 1: ìˆ² í€´ì¦ˆ --><div id="eco-quiz-1">
                <p>ìˆ²ì„ ì•„í”„ê²Œ í•˜ëŠ” í–‰ë™ 4ê°€ì§€ë¥¼<br>ëª¨ë‘ ì°¾ì•„ í´ë¦­í•˜ì„¸ìš”! ğŸ•µï¸â€â™€ï¸</p>
                <div id="eco-quiz-container">
                    <button class="eco-quiz-btn" data-correct="true">ğŸ¿ï¸ ë„í† ë¦¬ ì£¼ì›Œê°€ê¸°</button>
                    <button class="eco-quiz-btn" data-correct="false">ğŸš® ì“°ë ˆê¸° ë˜ê°€ì ¸ê°€ê¸°</button>
                    <button class="eco-quiz-btn" data-correct="true">ğŸŒ¿ ë‚¯ì„  ì‹ë¬¼ ì‹¬ê¸°</button>
                    <button class="eco-quiz-btn" data-correct="false">ğŸ’§ ê³„ê³¡ ë¬¼ì— ë°œ ë‹´ê·¸ê¸°</button>
                    <button class="eco-quiz-btn" data-correct="true">ğŸ¶ ìŒì•… í¬ê²Œ í‹€ê¸°</button>
                    <button class="eco-quiz-btn" data-correct="true">ğŸ¦‹ ì•¼ìƒë™ë¬¼ ì¡ê¸°</button>
                </div>
                <p>ì°¾ì€ ê°œìˆ˜: <span id="eco-quiz-found-count">0</span> / 4</p>
            </div>
            
            <!-- í¼ì¦ 2: ì„ íƒ í€´ì¦ˆ (ì²˜ìŒì—” ìˆ¨ê¹€) --><div id="quiz-2" style="display: none;">
                <p>ìˆ²ì´ ê±´ê°•í•´ì¡Œì–´ìš”! ë‘¥ì§€ë¥¼ ì°¾ì•˜ë„¤ìš”!</p>
                <p>ğŸ¦ "íŒ”ìƒ‰ì¡° 'ê±°ì œ'ê°€ ë¨¹ì§€ <strong>ì•ŠëŠ”</strong> ê²ƒì€?"</p>
                <button id="quiz-2-choice-a">(A) ì§€ë ì´ ğŸ›</button>
                <button id="quiz-2-choice-b">(B) í”Œë¼ìŠ¤í‹± ì¡°ê° âŒ</button>
                <button id="quiz-2-choice-c">(C) ë”±ì •ë²Œë ˆ ğŸ</button>
            </div>
        </div>

        <!-- 3. ìŠ¤í…Œì´ì§€ 3: ì§€ì‹¬ë„ ì•ë°”ë‹¤ --><div id="stage-3" class="stage">
            <h2>ğŸŒŠ 3ë‹¨ê³„: ì§€ì‹¬ë„ ì•ë°”ë‹¤</h2>
            <p>ëŒê³ ë˜ 'ê³ ë˜' ğŸ¬ê°€ ìœ ë ¹ ê·¸ë¬¼ì— ê°‡í˜”ì–´ìš”! ğŸ˜­</p>
            <p>ìë¬¼ì‡  ğŸ”’ë¥¼ í’€ì–´ êµ¬í•´ì£¼ì„¸ìš”! (4ìë¦¬)</p>
            <!-- [ìˆ˜ì •] ìŠ¤í…Œì´ì§€ 3 íŒíŠ¸ ì„¤ëª… --><p style="font-size: 0.9rem; color: #555;">(íŒíŠ¸: ê° ë¬¸ì¥ì˜ <b>êµµì€ ìˆ«ì</b>ë“¤ì„ ìˆœì„œëŒ€ë¡œ í™•ì¸í•´ ë³´ì„¸ìš”!)</p>
            
            <!-- í¼ì¦: 4ìë¦¬ ë¹„ë°€ë²ˆí˜¸ --><div id="password-hints">
                <p>1. ì¼íšŒìš© ì»µ ì©ëŠ” ì‹œê°„: ì•½ <b>2</b>0ë…„</p>
                <p>2. í”Œë¼ìŠ¤í‹±ë³‘ ì©ëŠ” ì‹œê°„: ì•½ <b>5</b>00ë…„ ì´ìƒ</p>
                <p>3. ë°”ë‹¤ì— ë²„ë ¤ì§„ ë‹´ë°°ê½ì´ˆ í•„í„°ëŠ” ìœ í•´ ë¬¼ì§ˆì„ <b>0</b>ìœ¼ë¡œ ë§Œë“¤ì§€ ëª»í•©ë‹ˆë‹¤.</p>
                <p>4. ìš°ë¦¬ëŠ” <b>1</b>íšŒìš©í’ˆ ì‚¬ìš©ì„ ì¤„ì—¬ì•¼ í•©ë‹ˆë‹¤.</p>
            </div>
            
            <div id="password-input">
                <input type="text" id="pw-1" maxlength="1" size="1">
                <input type="text" id="pw-2" maxlength="1" size="1">
                <input type="text" id="pw-3" maxlength="1" size="1">
                <input type="text" id="pw-4" maxlength="1" size="1">
            </div>
            <button id="password-submit">ìë¬¼ì‡  í’€ê¸°!</button>
        </div>

        <!-- 4. ì—”ë”© í™”ë©´ --><div id="end-screen" class="stage">
            <h1>ğŸ‰ êµ¬ì¶œ ì„±ê³µ! ğŸ‰</h1>
            <p>ğŸ¬ğŸ¦</p>
            <p>"ê³ ë§ˆì›Œ, ì‹ ì… ëŒ€ì›!<br>ìš°ë¦¬ì˜ ê±°ì œë¥¼ í•¨ê»˜ ì§€ì¼œì¤˜!"</p>
            <button id="restart-btn">ë‹¤ì‹œí•˜ê¸° ğŸ”</button>
        </div>

    </div> <!-- .container end --><script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- ì „ì—­ ë³€ìˆ˜ ë° ìƒíƒœ ê´€ë¦¬ ---
            const allStages = document.querySelectorAll('.stage');
            const messageBox = document.getElementById('message-box');
            
            let currentTrashElement = null; // ìŠ¤í…Œì´ì§€ 1: í˜„ì¬ ì„ íƒí•œ ì“°ë ˆê¸°
            let currentTrashType = '';      // ìŠ¤í…Œì´ì§€ 1: í˜„ì¬ ì„ íƒí•œ ì“°ë ˆê¸° íƒ€ì…
            let trashCleanedCount = 0;      // ìŠ¤í…Œì´ì§€ 1: ì²­ì†Œí•œ ì“°ë ˆê¸° ê°œìˆ˜
            
            // [ìˆ˜ì •] ìŠ¤í…Œì´ì§€ 2: ìˆ² í€´ì¦ˆ ìƒíƒœ
            let ecoQuizFoundCount = 0;
            const ecoQuizCorrectTotal = 4; // ì •ë‹µ ê°œìˆ˜

            // --- DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸° ---
            const container = document.querySelector('.container');
            const startBtn = document.getElementById('start-btn');
            
            // ìŠ¤í…Œì´ì§€ 1 ìš”ì†Œ
            const trashItems = document.querySelectorAll('.trash');
            const recyclingBins = document.getElementById('recycling-bins');
            const selectedTrashText = document.getElementById('selected-trash-text');
            const binButtons = document.querySelectorAll('.bin-btn');
            const quiz1 = document.getElementById('quiz-1');
            const quiz1Answer = document.getElementById('quiz-1-answer');
            const quiz1Submit = document.getElementById('quiz-1-submit');
            const quiz1HintBtn = document.getElementById('quiz-1-hint-btn');
            const quiz1HintText = document.getElementById('quiz-1-hint-text');

            // [ìˆ˜ì •] ìŠ¤í…Œì´ì§€ 2 ìš”ì†Œ
            const ecoQuizBtns = document.querySelectorAll('.eco-quiz-btn');
            const ecoQuizFoundCountSpan = document.getElementById('eco-quiz-found-count');
            const quiz2 = document.getElementById('quiz-2');
            const quiz2ChoiceA = document.getElementById('quiz-2-choice-a');
            const quiz2ChoiceB = document.getElementById('quiz-2-choice-b');
            const quiz2ChoiceC = document.getElementById('quiz-2-choice-c');
            
            // ìŠ¤í…Œì´ì§€ 3 ìš”ì†Œ
            const pwInputs = [
                document.getElementById('pw-1'),
                document.getElementById('pw-2'),
                document.getElementById('pw-3'),
                document.getElementById('pw-4')
            ];
            const passwordSubmit = document.getElementById('password-submit');
            
            // ì—”ë”© ìš”ì†Œ
            const restartBtn = document.getElementById('restart-btn');

            // --- í—¬í¼ í•¨ìˆ˜ ---

            /**
             * íŠ¹ì • ìŠ¤í…Œì´ì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜
             * @param {string} stageId - ë³´ì—¬ì¤„ ìŠ¤í…Œì´ì§€ì˜ ID (ì˜ˆ: 'stage-1')
             */
            function showStage(stageId) {
                allStages.forEach(stage => {
                    stage.style.display = 'none';
                });
                const nextStage = document.getElementById(stageId);
                if (nextStage) {
                    nextStage.style.display = 'block';
                }
                clearMessage(); // ìŠ¤í…Œì´ì§€ ì´ë™ ì‹œ ë©”ì‹œì§€ ì´ˆê¸°í™”

                // [ìˆ˜ì •] ìŠ¤í…Œì´ì§€ë³„ ë°°ê²½ ì´ë¯¸ì§€ URLì„ DALL-E 3 ìƒì„± ê·¸ë¦¼ìœ¼ë¡œ ë³€ê²½
                let bgImageUrl = 'https://user-images.githubusercontent.com/12964923/276709848-31682703-a189-4b2a-8c44-325f163836a0.png'; // ì‹œì‘ í™”ë©´: ê±°ì œ ì„¬ ì „ê²½
                switch(stageId) {
                    case 'stage-1':
                        bgImageUrl = 'https://user-images.githubusercontent.com/12964923/276709849-0d12e434-d02f-48d1-9494-b78f4675e2b0.png'; // ëª½ëŒí•´ë³€
                        break;
                    case 'stage-2':
                        bgImageUrl = 'https://user-images.githubusercontent.com/12964923/276709851-4099d0e7-8b63-4676-9d33-1d01f802d08a.png'; // êµ¬ì¡°ë¼ ìˆ²
                        break;
                    case 'stage-3':
                        bgImageUrl = 'https://user-images.githubusercontent.com/12964923/276709854-c8c83a15-3733-4f93-8408-2c262a046896.png'; // ì§€ì‹¬ë„ ë°”ë‹¤
                        break;
                    case 'end-screen':
                        bgImageUrl = 'https://user-images.githubusercontent.com/12964923/276709855-32e67a0e-436d-4ee8-b3d2-c20e4056157f.png'; // ì—”ë”© (ê¹¨ë—í•´ì§„ ë°”ë‹¤)
                        break;
                    case 'start-screen':
                    default:
                        bgImageUrl = 'https://user-images.githubusercontent.com/12964923/276709848-31682703-a189-4b2a-8c44-325f163836a0.png'; // ì‹œì‘ í™”ë©´: ê±°ì œ ì„¬ ì „ê²½
                        break;
                }
                container.style.backgroundImage = `url('${bgImageUrl}')`;
            }

            /**
             * ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” í•¨ìˆ˜ (alert() ëŒ€ì²´)
             * @param {string} text - ë³´ì—¬ì¤„ ë©”ì‹œì§€
             * @param {boolean} isError - ì—ëŸ¬ ë©”ì‹œì§€ ì—¬ë¶€ (true: ë¹¨ê°„ìƒ‰, false: ì´ˆë¡ìƒ‰)
             */
            function showMessage(text, isError = false) {
                messageBox.textContent = text;
                if (isError) {
                    messageBox.className = 'message-error';
                } else {
                    messageBox.className = 'message-success';
                }
            }
            
            /**
             * ë©”ì‹œì§€ ë°•ìŠ¤ë¥¼ ë¹„ìš°ëŠ” í•¨ìˆ˜
             */
            function clearMessage() {
                messageBox.textContent = '';
                messageBox.className = '';
            }

            /**
             * ê²Œì„ì„ ì´ˆê¸° ìƒíƒœë¡œ ë¦¬ì…‹í•˜ëŠ” í•¨ìˆ˜
             */
            function resetGame() {
                // ìŠ¤í…Œì´ì§€ 1 ë¦¬ì…‹
                trashCleanedCount = 0;
                currentTrashElement = null;
                currentTrashType = '';
                trashItems.forEach(item => { item.style.display = 'inline-block'; });
                recyclingBins.style.display = 'none';
                quiz1.style.display = 'none';
                quiz1Answer.value = '';
                quiz1HintText.style.display = 'none';

                // [ìˆ˜ì •] ìŠ¤í…Œì´ì§€ 2 ë¦¬ì…‹
                ecoQuizFoundCount = 0;
                ecoQuizFoundCountSpan.textContent = '0';
                ecoQuizBtns.forEach(btn => {
                    btn.classList.remove('found');
                    btn.disabled = false;
                });
                quiz2.style.display = 'none';
                
                // ìŠ¤í…Œì´ì§€ 3 ë¦¬ì…‹
                pwInputs.forEach(input => { input.value = ''; });

                // ì‹œì‘ í™”ë©´ìœ¼ë¡œ ì´ë™
                showStage('start-screen');
            }

            // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---

            // ê²Œì„ ì‹œì‘
            startBtn.addEventListener('click', () => showStage('stage-1'));

            // --- ìŠ¤í…Œì´ì§€ 1: ë¶„ë¦¬ìˆ˜ê±° ---
            
            // 1. ì“°ë ˆê¸° ì•„ì´í…œ í´ë¦­
            trashItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    currentTrashElement = e.target;
                    currentTrashType = e.target.dataset.type;
                    const trashName = e.target.dataset.name;
                    
                    selectedTrashText.textContent = `"${trashName}" ${e.target.textContent} (ì„)ë¥¼ ì–´ë””ì— ë²„ë¦´ê¹Œìš”?`;
                    recyclingBins.style.display = 'block';
                    clearMessage();
                });
            });

            // 2. ë¶„ë¦¬ìˆ˜ê±° í†µ ë²„íŠ¼ í´ë¦­
            binButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const selectedBin = e.target.dataset.bin;

                    if (selectedBin === currentTrashType) {
                        showMessage('ì •ë‹µ! âœ¨ ê¹¨ë—í•´ì¡Œì–´ìš”.', false);
                        currentTrashElement.style.display = 'none'; // ì“°ë ˆê¸° ìˆ¨ê¸°ê¸°
                        recyclingBins.style.display = 'none'; // í†µ ìˆ¨ê¸°ê¸°
                        trashCleanedCount++;
                        
                        // 3. ëª¨ë“  ì“°ë ˆê¸°ë¥¼ ì¹˜ì› ëŠ”ì§€ í™•ì¸
                        if (trashCleanedCount === trashItems.length) {
                            setTimeout(() => {
                                quiz1.style.display = 'block';
                                clearMessage();
                            }, 1000);
                        }
                    } else {
                        showMessage('ë•¡! ğŸ˜¥ ê·¸ê³³ì´ ì•„ë‹ˆì—ìš”. ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”.', true);
                    }
                });
            });

            // 4. ë‹¨ì–´ í€´ì¦ˆ ì •ë‹µ ì œì¶œ
            quiz1Submit.addEventListener('click', () => {
                const answer = quiz1Answer.value.trim().replace(/\s/g, ''); // ê³µë°± ì œê±°
                if (answer === 'ìœ ë ¹ê·¸ë¬¼') {
                    showMessage('ì •ë‹µ! ğŸ¥³ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™í•©ë‹ˆë‹¤.', false);
                    setTimeout(() => showStage('stage-2'), 1500);
                } else {
                    showMessage('í‹€ë ¸ì–´ìš”... íŒíŠ¸ë¥¼ ë‹¤ì‹œ ë³´ì„¸ìš”! ğŸ§', true);
                }
            });

            // í€´ì¦ˆ 1 íŒíŠ¸ ë²„íŠ¼
            quiz1HintBtn.addEventListener('click', () => {
                quiz1HintText.style.display = 'block';
            });

            // --- [ìˆ˜ì •] ìŠ¤í…Œì´ì§€ 2: ìˆ² í€´ì¦ˆ ---
            
            // 1. ìˆ² í€´ì¦ˆ ë²„íŠ¼ í´ë¦­
            ecoQuizBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const target = e.target;
                    
                    // ì´ë¯¸ ì°¾ì€ ê²ƒì€ í´ë¦­ ë°©ì§€
                    if (target.classList.contains('found')) return;

                    const isCorrect = target.dataset.correct === 'true';

                    if (isCorrect) {
                        target.classList.add('found');
                        target.disabled = true;
                        ecoQuizFoundCount++;
                        ecoQuizFoundCountSpan.textContent = ecoQuizFoundCount;
                        showMessage(`ì°¾ì•˜ë‹¤! (${ecoQuizFoundCount}/${ecoQuizCorrectTotal})`, false);

                        // 2. 4ê°€ì§€ë¥¼ ëª¨ë‘ ì°¾ì•˜ëŠ”ì§€ í™•ì¸
                        if (ecoQuizFoundCount === ecoQuizCorrectTotal) {
                            setTimeout(() => {
                                showMessage('ìˆ²ì„ ì•„í”„ê²Œ í•˜ëŠ” í–‰ë™ì„ ëª¨ë‘ ì°¾ì•˜ì–´ìš”! ğŸŒ¿', false);
                                document.getElementById('eco-quiz-1').style.display = 'none';
                                quiz2.style.display = 'block';
                            }, 1000);
                        }
                    } else {
                        showMessage('ì´ê±´ ê´œì°®ì€ í–‰ë™ì´ì—ìš”! ğŸ˜Š', true);
                    }
                });
            });

            // 3. ì„ íƒ í€´ì¦ˆ (íŒ”ìƒ‰ì¡° ë¨¹ì´)
            quiz2ChoiceA.addEventListener('click', () => {
                showMessage('ì§€ë ì´ëŠ” íŒ”ìƒ‰ì¡°ì˜ ë§›ìˆëŠ” ì‹ì‚¬ì˜ˆìš”. ğŸ˜‹', true);
            });
            quiz2ChoiceC.addEventListener('click', () => {
                showMessage('ë”±ì •ë²Œë ˆë„ ì¢‹ì•„í•´ìš”! ğŸ', true);
            });
            quiz2ChoiceB.addEventListener('click', () => {
                showMessage('ì •ë‹µ! ğŸ˜¥ ìƒˆë“¤ì´ í”Œë¼ìŠ¤í‹±ì„ ë¨¹ì´ë¡œ ì˜¤í•´í•œëŒ€ìš”.', false);
                setTimeout(() => showStage('stage-3'), 1500);
            });

            // --- ìŠ¤í…Œì´ì§€ 3: ë¹„ë°€ë²ˆí˜¸ ---

            // 1. ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ ì‹œ ìë™ íƒ­ ì´ë™
            pwInputs.forEach((input, index) => {
                input.addEventListener('input', (e) => {
                    // ê¸€ì ì…ë ¥ ì‹œ ë‹¤ìŒ ì¹¸ìœ¼ë¡œ ì´ë™
                    if (e.target.value.length === 1 && index < pwInputs.length - 1) {
                        pwInputs[index + 1].focus();
                    }
                });
                input.addEventListener('keydown', (e) => {
                    // ë°±ìŠ¤í˜ì´ìŠ¤ ì…ë ¥ ì‹œ ì´ì „ ì¹¸ìœ¼ë¡œ ì´ë™
                    if (e.key === 'Backspace' && e.target.value.length === 0 && index > 0) {
                        pwInputs[index - 1].focus();
                    }
                });
            });

            // 2. ìë¬¼ì‡  í’€ê¸° ë²„íŠ¼ í´ë¦­
            passwordSubmit.addEventListener('click', () => {
                const pw = pwInputs[0].value + pwInputs[1].value + pwInputs[2].value + pwInputs[3].value;
                
                if (pw === '2501') {
                    showMessage('êµ¬ì¶œ ì„±ê³µ! ğŸ”“ ëŒê³ ë˜ê°€ ììœ ë¡œì›Œì¡Œì–´ìš”! ğŸ¬', false);
                    setTimeout(() => showStage('end-screen'), 1500);
                } else {
                    showMessage('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¤ìš”! íŒíŠ¸ë¥¼ ë‹¤ì‹œ ë³´ì„¸ìš”! ğŸ”¢', true);
                }
            });

            // --- ì—”ë”©: ë‹¤ì‹œí•˜ê¸° ---
            restartBtn.addEventListener('click', resetGame);

        });
    </script>

</body>
</html>

